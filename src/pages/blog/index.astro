---
import { getCollection } from 'astro:content';
import { format } from 'date-fns';
import BaseLayout from '../../layouts/BaseLayout.astro';

const posts = (await getCollection('posts', ({ data }) => data.published))
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());

const title = 'Blog';
const description = "I don't blog much, but I want to change that. Expect to see ramblings about hobbies, fatherhood, design, and development.";
---

<BaseLayout title={title} description={description}>
  <h1 class="text-2xl md:text-3xl font-bold mb-6 leading-none">blog</h1>

  <p class="max-w-[34em] leading-relaxed mb-4">{description}</p>

  <div class="max-w-[34em]">
    <ul class="my-6 p-0">
      {posts.map((post) => (
        <li class="list-none mb-6 leading-relaxed">
          <a href={`/blog/${post.slug}`}>{post.data.title}</a>
          <p class="mt-1 mb-0">
            <small>{format(new Date(post.data.date), 'MMM d, y')}</small>
          </p>
        </li>
      ))}
    </ul>
  </div>

  <a href="/" class="inline-block mt-32">
    &larr; home
  </a>
</BaseLayout>
